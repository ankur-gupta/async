
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.svg">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.4">
    
    
      
        <title>Syntax - Asynchronous Programming in Python</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6b80c2a2.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#syntax" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Asynchronous Programming in Python" class="md-header__button md-logo" aria-label="Asynchronous Programming in Python" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17 3 5.25 4.5L17 12l5.25 4.5L17 21v-3h-2.74l-2.82-2.82 2.12-2.12L15.5 15H17V9h-1.5l-9 9H2v-3h3.26l9-9H17V3M2 6h4.5l2.82 2.82-2.12 2.12L5.26 9H2V6Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Asynchronous Programming in Python
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Syntax
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="green"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ankur-gupta/async" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ankur-gupta/async
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Get Started
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../cooking-is-like-programming/" class="md-tabs__link md-tabs__link--active">
        Suspendables
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../generators/introduction/" class="md-tabs__link">
        Generators
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../coroutines/introduction/" class="md-tabs__link">
        Coroutines
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../review/generators-v-coroutines/" class="md-tabs__link">
        Review
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Asynchronous Programming in Python" class="md-nav__button md-logo" aria-label="Asynchronous Programming in Python" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17 3 5.25 4.5L17 12l5.25 4.5L17 21v-3h-2.74l-2.82-2.82 2.12-2.12L15.5 15H17V9h-1.5l-9 9H2v-3h3.26l9-9H17V3M2 6h4.5l2.82 2.82-2.12 2.12L5.26 9H2V6Z"/></svg>

    </a>
    Asynchronous Programming in Python
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ankur-gupta/async" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    ankur-gupta/async
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Get Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Get Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Get Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../why-is-it-difficult/" class="md-nav__link">
        Why is it difficult?
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Suspendables
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Suspendables" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Suspendables
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cooking-is-like-programming/" class="md-nav__link">
        Cooking is like programming
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../buying-a-plane-ticket/" class="md-nav__link">
        Buying a plane ticket
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../suspendables/" class="md-nav__link">
        Suspendables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../control/" class="md-nav__link">
        Control
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Syntax
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Syntax
      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#function" class="md-nav__link">
    Function
  </a>
  
    <nav class="md-nav" aria-label="Function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defining-stage" class="md-nav__link">
    Defining stage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calling-stage" class="md-nav__link">
    Calling stage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#call-execute-necessarily" class="md-nav__link">
    Call &ne; Execute, necessarily
  </a>
  
    <nav class="md-nav" aria-label="Call &ne; Execute, necessarily">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#calling-a-class" class="md-nav__link">
    Calling a class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calling-an-object-of-the-class" class="md-nav__link">
    Calling an object of the class
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-function" class="md-nav__link">
    Simple Function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suspendable-function-cannot-be-a-simple-function" class="md-nav__link">
    Suspendable function cannot be a simple function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suspendable-function-implemented-as-a-class" class="md-nav__link">
    Suspendable function implemented as a class
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#callbacks-instead-of-suspendable-functions" class="md-nav__link">
    Callbacks instead of suspendable functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verbosity-natural-representation" class="md-nav__link">
    Verbosity &amp; Natural Representation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extended-function" class="md-nav__link">
    Extended Function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#footnotes" class="md-nav__link">
    Footnotes
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../review/" class="md-nav__link">
        Review
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Generators
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Generators" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Generators
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generators/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generators/a-better-way-to-drive/" class="md-nav__link">
        A Better Way to Drive
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generators/generator-class/" class="md-nav__link">
        Generator Class
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generators/mechanics-by-examples/" class="md-nav__link">
        Mechanics by Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generators/yield-from/" class="md-nav__link">
        yield from
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../generators/examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Coroutines
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Coroutines" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Coroutines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../coroutines/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../coroutines/eventloop/" class="md-nav__link">
        Event Loop
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Review
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Review" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Review
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../review/generators-v-coroutines/" class="md-nav__link">
        Generators vs Coroutines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../review/asynchronous-generator/" class="md-nav__link">
        Asynchronous Generator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#function" class="md-nav__link">
    Function
  </a>
  
    <nav class="md-nav" aria-label="Function">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#defining-stage" class="md-nav__link">
    Defining stage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calling-stage" class="md-nav__link">
    Calling stage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#call-execute-necessarily" class="md-nav__link">
    Call &ne; Execute, necessarily
  </a>
  
    <nav class="md-nav" aria-label="Call &ne; Execute, necessarily">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#calling-a-class" class="md-nav__link">
    Calling a class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calling-an-object-of-the-class" class="md-nav__link">
    Calling an object of the class
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simple-function" class="md-nav__link">
    Simple Function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suspendable-function-cannot-be-a-simple-function" class="md-nav__link">
    Suspendable function cannot be a simple function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#suspendable-function-implemented-as-a-class" class="md-nav__link">
    Suspendable function implemented as a class
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#callbacks-instead-of-suspendable-functions" class="md-nav__link">
    Callbacks instead of suspendable functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verbosity-natural-representation" class="md-nav__link">
    Verbosity &amp; Natural Representation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extended-function" class="md-nav__link">
    Extended Function
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#footnotes" class="md-nav__link">
    Footnotes
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
  
                

  <a href="https://github.com/ankur-gupta/async/edit/main/docs/suspendables/syntax.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="syntax">Syntax<a class="headerlink" href="#syntax" title="Permanent link">&para;</a></h1>
<details class="question" open="open">
<summary>Syntax</summary>
<p>What syntax is needed to correctly define a <em>suspendable</em> entity ?</p>
</details>
<p>We have previously noticed that the syntax we used was janky, even for pseudocode. </p>
<h2 id="function">Function<a class="headerlink" href="#function" title="Permanent link">&para;</a></h2>
<p>Let's begin with a relevant albeit non-traditional definition of a function.</p>
<div class="admonition summary">
<p class="admonition-title">Function</p>
<p>A function is a packaged unit of code that has at least two stages: <br/><br/>
1. <em>defining stage</em> <br/>
2. <em>calling stage</em> <br/></p>
</div>
<p>These two stages are so trivial that one may wonder why are we even discussing it.
Hopefully, the necessity of this discussion will soon become clear.</p>
<h3 id="defining-stage">Defining stage<a class="headerlink" href="#defining-stage" title="Permanent link">&para;</a></h3>
<p>A function may be defined by executing code such as the following.
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x_squared</span> <span class="o">=</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">x</span>
</code></pre></div>
Executing the above code doesn't actually execute the contents of <code>square</code><sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>. In fact,
when we execute the above code, we don't even know which value of <code>x</code> needs to be squared. Thus,
it would not even make sense to execute the contents of <code>square</code> while defining it.</p>
<h3 id="calling-stage">Calling stage<a class="headerlink" href="#calling-stage" title="Permanent link">&para;</a></h3>
<p>The function <code>square</code> can be called like so:
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">square</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># 4</span>
</code></pre></div>
<em>Calling</em> a function means executing a code snippet of the form <code>function_name(optional_args)</code>.
It just so happens that <em>calling</em> <code>square</code> executes the contents of <code>square</code>. This may sound
torturedly pedantic. After all, what else could we possibly mean by <em>calling a function</em>?
It turns out that there may be situations where calling an entity may not necessarily execute
the contents of the entity.</p>
<h2 id="call-execute-necessarily">Call &ne; Execute, necessarily<a class="headerlink" href="#call-execute-necessarily" title="Permanent link">&para;</a></h2>
<p>Let's broaden our notion of what it means to <em>call an entity</em>. In python, functions are not
the only <a href="https://docs.python.org/3/library/functions.html#callable">callable</a> entities.</p>
<h3 id="calling-a-class">Calling a class<a class="headerlink" href="#calling-a-class" title="Permanent link">&para;</a></h3>
<p>Let's consider the following simple class.
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">():</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s1">)&#39;</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">new_data</span>
</code></pre></div></p>
<p>We can <em>call</em> the <code>HelloWorld</code> class just like we could <em>call</em> a simple function.
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">y</span> <span class="o">=</span> <span class="n">HelloWorld</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
Calling <code>HelloWorld</code> executes the default class constructor (<code>__init__</code>) but not the other
methods in the class. Thus, calling the class does not execute the entire content of
the class. In fact, executing the entire content of the class is not even a properly defined
operation<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>.</p>
<h3 id="calling-an-object-of-the-class">Calling an object of the class<a class="headerlink" href="#calling-an-object-of-the-class" title="Permanent link">&para;</a></h3>
<p>Since <code>HelloWorld</code> has a <code>__call__</code> method, an instance of the <code>HelloWorld</code> class is also a
<a href="https://docs.python.org/3/library/functions.html#callable">callable</a>.
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">y</span><span class="p">()</span>  <span class="c1"># 1</span>
</code></pre></div>
Again, calling <code>y</code> only executes the contents of the <code>HelloWorld.__call__</code> method. It does not
execute the contents of <code>__init__</code> method (aka the class constructor) or any of the other
class methods.</p>
<p>The two examples above help disassociate the notion of <em>calling an entity</em> from
<em>executing the contents of an entity</em>. Calling an entity has multiple semantics.</p>
<h2 id="simple-function">Simple Function<a class="headerlink" href="#simple-function" title="Permanent link">&para;</a></h2>
<p>We need some terminology to distinguish functions that have different calling semantics.</p>
<div class="admonition summary">
<p class="admonition-title">Simple Function</p>
<p>A function is a <em>simple function</em> if calling the function executes the contents of
the function. In other words, the <em>calling stage</em> is the same as the <em>execution stage</em> for
a simple function.</p>
</div>
<p>A simple function is the ubiquitous function that every modern day programmer learns.
For example, <code>square</code> is a simple function.</p>
<h2 id="suspendable-function-cannot-be-a-simple-function">Suspendable function cannot be a simple function<a class="headerlink" href="#suspendable-function-cannot-be-a-simple-function" title="Permanent link">&para;</a></h2>
<p>We suspected that this might be the case since <a href="/suspendables/control/#fnref:1">Footnote 1</a>
of the previous section. This is best described by a simpler counter example — let's assume that
a <em>suspendable function</em> can indeed be expressed as a <em>simple function</em> in the
following pseudocode:</p>
<div class="highlight"><span class="filename">Pseudocode</span><pre><span></span><code><span class="n">suspendable</span> <span class="n">function</span> <span class="n">count_hello</span><span class="p">:</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">true</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="nb">print</span> <span class="n">string</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; hello&quot;</span>
        <span class="n">release</span> <span class="n">control</span>  <span class="c1"># to caller</span>

<span class="n">count_hello</span><span class="p">()</span>  <span class="c1"># 1 hello</span>
<span class="n">count_hello</span><span class="p">()</span>  <span class="c1"># 2 hello</span>
<span class="n">count_hello</span><span class="p">()</span>  <span class="c1"># 3 hello</span>
</code></pre></div>
<p>The above pseudocode has a few problems:</p>
<ol>
<li>A fourth call to <code>count_hello</code> would inevitably result in <code>4 hello</code>. There is no way to reset the state
back to <code>1 hello</code>. We're stuck!</li>
<li>What if we wanted to have two instances of <code>count_hello</code> simultaneously, possibly at different
states?</li>
<li>What if we wanted to receive <code>1 hello</code> as returned value instead of just being printed?</li>
</ol>
<p>When we execute the contents of a <em>suspendable function</em>, we create an <em>internal state</em> for that
particular chain of execution. This internal state needs to be stored somewhere. If we then need to
initiate a second execution of the same <em>suspendable function</em>, we need to find a different
place to store the separate internal state of this second chain of execution.</p>
<p>A simple function can maintain at most one <em>internal state</em><sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup>. Unless global variables are involved,
every call to a simple function is independent of each other, and as a result simple functions
do not suffer from the problems mentioned above.</p>
<div class="admonition summary">
<p class="admonition-title">Suspendable function &ne; Simple function</p>
<p>Unlike a simple function, calling a suspendable function should not execute its contents.</p>
</div>
<p>Later in the course, we will see how exactly a suspendable function would come to differ from a
simple function.</p>
<h2 id="suspendable-function-implemented-as-a-class">Suspendable function implemented as a class<a class="headerlink" href="#suspendable-function-implemented-as-a-class" title="Permanent link">&para;</a></h2>
<p>Being able to independentally execute different instances of the same code is the hallmark of
object oriented programming. We could easily define <code>count_hello</code> as the following python
class.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="k">class</span> <span class="nc">CountHello</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; hello&quot;</span><span class="p">)</span>
</code></pre></div>
<p>We can now instantiate multiple instances of <code>CountHello</code>, each with its own independent state.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="n">z</span> <span class="o">=</span> <span class="n">CountHello</span><span class="p">()</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">CountHello</span><span class="p">()</span>
<span class="n">z</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> <span class="c1"># 1 hello</span>
<span class="n">z</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> <span class="c1"># 2 hello</span>
<span class="n">z</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> <span class="c1"># 3 hello</span>
<span class="n">w</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> <span class="c1"># 1 hello</span>
<span class="n">z</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> <span class="c1"># 4 hello</span>
</code></pre></div>
<p>The above code is proper Python code. We didn't need to use any fancy keywords to indicate
a transfer of control. Each call to <code>CountHello.run</code> performs one iteration that
increases the value of <code>count</code> by <code>1</code> and then returns the control back to the caller. The state
<code>count</code> is preserved between calls to <code>CountHello.run</code>.</p>
<p>The actual python code in the <code>CountHello</code> class performs the same work as the pseudocode
suspendable function <code>count_hello</code> but without needing any notion of suspendability. </p>
<details class="question" open="open">
<summary>Question</summary>
<p>Why do we even need suspendable functions at all if we can just use classes?</p>
</details>
<p>The answer to this question is anti-climactic: <em>suspendable entities are not essential</em>.
We could do asynchronous programming using other constructs such as classes or callbacks.
In fact, the above <code>CountHello</code> class is a rudimentary implementation of a python generator,
which we will study <a href="/generators/generator-class/">later</a> in the course.</p>
<p>The benefit of using a suspendable entity (over using a class) is readability, which is 
<a href="https://en.wikipedia.org/wiki/Zen_of_Python">highly valued</a> in Python.</p>
<h2 id="callbacks-instead-of-suspendable-functions">Callbacks instead of suspendable functions<a class="headerlink" href="#callbacks-instead-of-suspendable-functions" title="Permanent link">&para;</a></h2>
<p>Callbacks provide an alternative approach to perform asynchronous programming, one that is
completely independent to suspendables. Callbacks are commonly used in Javascript but
also <a href="https://www.python.org/dev/peps/pep-3156/#coroutines-and-the-scheduler">available in python</a>.
Though, even in Javascript,
callbacks are sometimes considered <a href="http://callbackhell.com/">ugly</a> and async/await is
considered
<a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Async_await">easier</a>.
These <a href="https://www.slideshare.net/elizarov/introduction-to-coroutines-kotlinconf-2017">slides</a>,
even though about Kotlin, provide an excellent comparison of the callback approach against the
coroutine approach.</p>
<h2 id="verbosity-natural-representation">Verbosity &amp; Natural Representation<a class="headerlink" href="#verbosity-natural-representation" title="Permanent link">&para;</a></h2>
<p>Our pseudocode examples ignored syntax ambiguities. But when programming in python, we want
readable, clear, consistent, terse, and unambiguous syntax. Python is popular because of its 
wonderful syntax and it would be a shame to lose that quality simply to write an 
asynchronous program.</p>
<p>A class is much more verbose than a function. A class requires boilerplate code
(such as constructors) which is not needed for a function. For our toy example,
the class <code>CountHello</code> does not seem to be much more verbose than the function <code>count_hello</code> but
the class-equivalent for a moderate sized suspendable task could be quite verbose. 
A functional form is also a more <a href="https://www.python.org/dev/peps/pep-0342/#motivation">natural way</a>
to express many forms of computation.  </p>
<p>Consider the suspendable psedudocode function <code>mashed_potatoes</code>, discussed
<a href="/suspendables/cooking-is-like-programming/#mashed-potatoes">previously</a>.
This function has one control transfer point. We can create a non-suspendable class out of the 
suspendable <code>mashed_potatoes</code> by splitting the code before and after the control transfer point.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Suspendable Function Form</label><label for="__tabbed_1_2">Non-suspendable Class Form</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><span class="filename">Pseudocode</span><pre><span></span><code><span class="n">suspendable</span> <span class="n">function</span> <span class="n">mashed_potatoes</span><span class="p">(</span><span class="n">minutes</span><span class="p">,</span> <span class="n">auto_shutoff</span><span class="p">):</span>
    <span class="n">peel_potatoes</span><span class="p">()</span>
    <span class="n">cut_potatoes</span><span class="p">()</span>
    <span class="n">start_boiling_potatoes</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="n">minutes</span><span class="p">,</span> <span class="n">auto_shutoff</span><span class="o">=</span><span class="n">auto_shutoff</span><span class="p">)</span>

    <span class="n">release</span> <span class="n">control</span>  <span class="c1"># to the caller</span>

    <span class="n">finish_boiling_potatoes</span><span class="p">()</span>
    <span class="n">mash_potatoes</span><span class="p">()</span>
    <span class="n">stir_potatoes_with_butter</span><span class="p">()</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="k">class</span> <span class="nc">MashedPotatoes</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">auto_shutoff</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">minutes</span> <span class="o">=</span> <span class="n">minutes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auto_shutoff</span> <span class="o">=</span> <span class="n">auto_shutoff</span>

    <span class="k">def</span> <span class="nf">before_control_transfer</span><span class="p">():</span>
        <span class="n">peel_potatoes</span><span class="p">()</span>
        <span class="n">cut_potatoes</span><span class="p">()</span>
        <span class="n">start_boiling_potatoes</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">auto_shutoff</span><span class="o">=</span><span class="n">true</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">after_control_transfer</span><span class="p">():</span>
        <span class="n">finish_boiling_potatoes</span><span class="p">()</span>
        <span class="n">mash_potatoes</span><span class="p">()</span>
        <span class="n">stir_potatoes_with_butter</span><span class="p">()</span>
</code></pre></div>
</div>
</div>
</div>
<p>It may be argued that adding a few new keywords to legalize the syntax for a suspendable function 
is better than having to create a class every time we want to suspend control.</p>
<table>
<thead>
<tr>
<th><code>mashed_potatoes</code></th>
<th><code>MashedPotatoes</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>Very little boilerplate code</td>
<td>More boilerplate code (such as constructor)</td>
</tr>
<tr>
<td>Pseudocode</td>
<td>Proper python code</td>
</tr>
<tr>
<td>Needs <code>release</code> &amp; <code>control</code> words</td>
<td>No special keywords needed</td>
</tr>
<tr>
<td>Order of computation is specified by the function itself</td>
<td>User needs to remember to order of computation: <code>before_control_transfer()</code> → <code>after_control_transfer()</code></td>
</tr>
</tbody>
</table>
<h2 id="extended-function">Extended Function<a class="headerlink" href="#extended-function" title="Permanent link">&para;</a></h2>
<p>The above discussion may be summarized into the following two points.</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> A suspendable function cannot be a simple function</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> We prefer a suspendable function over classes or callbacks</li>
</ul>
<p>This leads us to define a new type of function.</p>
<div class="admonition summary">
<p class="admonition-title">Extended Function</p>
<p>A function is an <em>extended function</em> if calling the function does not execute the
contents of the function. Executing the contents of the function requires an <em>execution stage</em>
beyond the <em>calling stage</em>.</p>
</div>
<p>Allowing a function to have yet another stage (beyond the defining and calling stage) lets
us solve all of our problems albeit at the cost of increased complexity.
This concept of an extended function is best described via an example.</p>
<div class="highlight"><span class="filename">Python</span><pre><span></span><code><span class="c1"># Stage 1: Defining stage</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Executing contents of example&quot;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="mi">1</span>

<span class="nb">type</span><span class="p">(</span><span class="n">example</span><span class="p">)</span>
<span class="c1"># function</span>

<span class="c1"># Stage 2: Calling stage </span>
<span class="n">x</span> <span class="o">=</span> <span class="n">example</span><span class="p">()</span>
<span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># generator</span>

<span class="c1"># Stage 3: Execution stage</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># Executing contents of example</span>

<span class="nb">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="c1"># 1</span>
</code></pre></div>
<p>The above example requires a lot of explanation, which we will provide in the
<a href="/generators/introduction/">Generators</a> section later in the course. For now, this example 
serves to demonstrate that calling <code>example</code> neither prints <code>Executing contents of example</code> nor provides
<code>1</code> as a return value.
Instead, calling <code>example</code> simply returns a <code>generator</code> object. Executing the contents of
<code>example</code> requires yet another step — calling <code>next</code> on the <code>generator</code> object <code>x</code>.
Evidently, the extended function <code>example</code> is very different from the simple function <code>square</code>.
The extended function <code>example</code> has one extra stage — the execution stage.</p>
<p>Wary readers may notice that calling <code>example</code> is reminiscent of calling the constructor of a
class. This is precisely true! Every invocation <code>example()</code> produces a separate,
independent <code>generator</code> object. The function <code>example</code> serves as a concise form of class
declaration. In other words, an extended function (such as <code>example</code>) may be thought of as
verbosity-reducing syntactic sugar over a class declaration.</p>
<p>This is not the only example of <em>trickery</em> that <em>hides complexity behind syntactical brevity</em>.
A very similar construct is a
<a href="https://docs.python.org/3/library/contextlib.html#contextlib.contextmanager">context manager decorator</a>,
which allows us to define a context manager as a function instead of having to write a class
with boilerplate methods. </p>
<p><em>Arguably, hiding complexity behind syntactical brevity is a defining
feature of python itself.</em></p>
<h2 id="footnotes">Footnotes<a class="headerlink" href="#footnotes" title="Permanent link">&para;</a></h2>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Though, the syntax of the contents of the function is checked.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>In order to properly define what it means to execute the entire content of a class, we will
need to first some answer questions, such as — what's the order in which various class methods are
executed the arguments and which arguments need to be passed to the class methods.&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>A simple function may use a global variable to save some <em>internal state</em>. This global variable
may be accessible by future function invocations or even by other functions. Thus, a simple
function using a global variable to maintain an <em>internal state</em> suffers from the same
problems outlined above. This is one of the reasons why global variables are considered a
<a href="https://stackoverflow.com/questions/10525582/why-are-global-variables-considered-bad-practice">bad programming practive</a>.&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2022-09-13T00:38:13+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2022-09-13</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2022-09-13T00:38:13+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2022-09-13</span>
      
    
  </small>
</div>





              

  <!-- Giscus -->
  <h2 id="__comments">Comments</h2>
  <script src="https://giscus.app/client.js"
        data-repo="ankur-gupta/async-discussions"
        data-repo-id="R_kgDOH-sr7Q"
        data-category="Comments"
        data-category-id="DIC_kwDOH-sr7c4CRYX1"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="dark_dimmed"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>

  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme) 
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../control/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Control" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Control
            </div>
          </div>
        </a>
      
      
        
        <a href="../review/" class="md-footer__link md-footer__link--next" aria-label="Next: Review" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Review
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Ankur Gupta
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/ankur-gupta" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.perfectlyrandom.org" target="_blank" rel="noopener" title="www.perfectlyrandom.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M244 246c-3.2-2-6.3-2.9-10.1-2.9-6.6 0-12.6 3.2-19.3 3.7l1.7 4.9zm135.9 197.9c-19 0-64.1 9.5-79.9 19.8l6.9 45.1c35.7 6.1 70.1 3.6 106-9.8-4.8-10-23.5-55.1-33-55.1zM340.8 177c6.6 2.8 11.5 9.2 22.7 22.1 2-1.4 7.5-5.2 7.5-8.6 0-4.9-11.8-13.2-13.2-23 11.2-5.7 25.2-6 37.6-8.9 68.1-16.4 116.3-52.9 146.8-116.7C548.3 29.3 554 16.1 554.6 2l-2 2.6c-28.4 50-33 63.2-81.3 100-31.9 24.4-69.2 40.2-106.6 54.6l-6.3-.3v-21.8c-19.6 1.6-19.7-14.6-31.6-23-18.7 20.6-31.6 40.8-58.9 51.1-12.7 4.8-19.6 10-25.9 21.8 34.9-16.4 91.2-13.5 98.8-10zM555.5 0l-.6 1.1-.3.9.6-.6zm-59.2 382.1c-33.9-56.9-75.3-118.4-150-115.5l-.3-6c-1.1-13.5 32.8 3.2 35.1-31l-14.4 7.2c-19.8-45.7-8.6-54.3-65.5-54.3-14.7 0-26.7 1.7-41.4 4.6 2.9 18.6 2.2 36.7-10.9 50.3l19.5 5.5c-1.7 3.2-2.9 6.3-2.9 9.8 0 21 42.8 2.9 42.8 33.6 0 18.4-36.8 60.1-54.9 60.1-8 0-53.7-50-53.4-60.1l.3-4.6 52.3-11.5c13-2.6 12.3-22.7-2.9-22.7-3.7 0-43.1 9.2-49.4 10.6-2-5.2-7.5-14.1-13.8-14.1-3.2 0-6.3 3.2-9.5 4-9.2 2.6-31 2.9-21.5 20.1L15.9 298.5c-5.5 1.1-8.9 6.3-8.9 11.8 0 6 5.5 10.9 11.5 10.9 8 0 131.3-28.4 147.4-32.2 2.6 3.2 4.6 6.3 7.8 8.6 20.1 14.4 59.8 85.9 76.4 85.9 24.1 0 58-22.4 71.3-41.9 3.2-4.3 6.9-7.5 12.4-6.9.6 13.8-31.6 34.2-33 43.7-1.4 10.2-1 35.2-.3 41.1 26.7 8.1 52-3.6 77.9-2.9 4.3-21 10.6-41.9 9.8-63.5l-.3-9.5c-1.4-34.2-10.9-38.5-34.8-58.6-1.1-1.1-2.6-2.6-3.7-4 2.2-1.4 1.1-1 4.6-1.7 88.5 0 56.3 183.6 111.5 229.9 33.1-15 72.5-27.9 103.5-47.2-29-25.6-52.6-45.7-72.7-79.9zm-196.2 46.1v27.2l11.8-3.4-2.9-23.8zm-68.7-150.4 24.1 61.2 21-13.8-31.3-50.9zm84.4 154.9 2 12.4c9-1.5 58.4-6.6 58.4-14.1 0-1.4-.6-3.2-.9-4.6-26.8 0-36.9 3.8-59.5 6.3z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.linkedin.com/in/ankurguptawisc" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/ankurio" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.2ab50757.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
    
  </body>
</html>